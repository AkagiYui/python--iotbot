# webhook

webhook 功能是以内置插件的方式实现，实现比较简陋，如果不满足需求可以自行写插件

开启 webhook 功能需要设置配置项`webhook`为`true`, 此外另一个必选项为`webhook_post_url`用来推送信息, 为`POST`请求，推送的消息内容和格式与 iotbot websocket 发送过来的一致。
配置项`webhook_timeout`是指发送 post 请求到指定的地址，对方服务器响应的超时时间

发送 post 请求后允许服务端返回的响应包含几个参数用来对上下文进行快速回复，只接 受 json 格式的数据,可选字段有:

```json
{
  "msg": "Hello",
  "at": 0,
  "pic_url": "图片链接",
  "pic_base64": "图片base64编码",
  "voice_url": "音频链接",
  "voice_base64": "音频base64编码"
}
```

说明：
以上字段都不是必须，只要传了其中的字段，会自动选择发送类型
图片和语音相关的都有两个字段，\_url 优先于 \_base64,

直接上示例：

1. 发送文字消息**不艾特**

```json
{
  "msg": "test"
}
```

2. 发送文字消息**艾特**

```json
{
  "msg": "test",
  "at": 1
}
```

3. 发送图片消息

```json
{
  "pic_url": "..."
}
```

4. 发送图文消息

```json
{
  "msg": "test",
  "pic_url": "..."
}
```

5. 发送语音消息

```json
{
  "voice_url": "..."
}
```

为了安全考虑，只支持几个简单的操作
...
语音和文字和图片没有关系，只要存在即发送

图文消息优先于纯文字消息
